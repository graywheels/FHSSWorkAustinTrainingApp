
<mat-paginator
  [length]="taskResource.value()?.totalCount" 
  [pageSize]="PAGE_SIZE"
  (page)="handlePageEvent($event)"
  [hidePageSize]="true"
  [showFirstLastButtons]="true" 
/>

<!-- loading spinner -->

@if (taskResource.isLoading()) {
  <div class="shade">
    <mat-spinner />
  </div>
}

<!-- error handling -->

@if (taskResource.error()) {
  <p>Failed to retrieve tasks. Please try again.</p>
  <p>{{taskResource.error()?.message}}</p>
  <button (click)="taskResource.refresh()">Refresh</button>
}


<section class="create-task">
  <button mat-fab color="primary" aria-label="add task button" (click)="openNewTaskModal()">
    <mat-icon>add</mat-icon>
  </button>
</section>

<!-- task list -->

<section class="task-list">
  @if (showCreateModal() && paginator().pageIndex === 0) {
    <app-task-create-modal (cancelHandler)="showCreateModal.set(false)" (saveHandler)="taskCreated()"></app-task-create-modal>
  }
  @for (task of taskResource.value()?.data; track task.id) {
    <app-task-card [initialTaskValue]="task" (deleteTaskEvent)="deleteTask($event)"></app-task-card>
  }
</section>